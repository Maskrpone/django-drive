{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>Dossier</title>
    <link rel="stylesheet" href="{% static 'css/home.css' %}" />
    <script src="{% static 'js/script.js' %}"></script>
  </head>
  <body>
    <!-- Breadcrumb Navigation -->
    <div class="breadcrumbs">
      <a href="{% url 'drive' %}">Root</a>
      {% for key,value in breadcrumbs.items %} {% if key %}
      <a href="{% url 'drive' value %}">{{ key }}</a>
      {% endif %} {% endfor %}
    </div>

    <p>folders : {{ folders }}</p>
    <p>files : {{ files }}</p>
    <p>path : {{ current_path }}</p>
    <span>bread : {{breadcrumbs}}</span>
    <!-- Subfolders -->
    <h3>Folders</h3>
    <ul>
      {% for folder in folders %}
      <li>
        <a href="{% url 'drive' current_path|add:folder|add:'/' %}"
          >{{ folder }}</a
        >
      </li>
      {% empty %}
      <li>No folders</li>
      {% endfor %}
    </ul>

    <!-- Files -->
    <h3>Files</h3>
    <ul>
      {% for file in files %}
      <li><a href="{{ file }}">{{ file }}</a></li>
      {% empty %}
      <li>No files</li>
      {% endfor %}
    </ul>

    <h1>Create a folder</h1>
    <form method="POST" action="{% url 'create_folder' %}">
      {% csrf_token %}
      <input type="hidden" name="current_path" value="{{ current_path }}" />
      <input type="text" name="folder_name" placeholder="New folder name" />
      <button type="submit">Create Folder</button>
    </form>

    <h1>Upload a file</h1>
    <form
      method="POST"
      enctype="multipart/form-data"
      action="{% url 'upload_file' %}"
    >
      {% csrf_token %}
      <input type="hidden" name="current_path" value="{{ current_path }}" />
      {{ form.as_p }}
      <button type="submit">Upload File</button>
    </form>

    {% comment %}
    <div class="header">
      <div class="menu">
        <button class="hamburger">
          <i class="fas fa-bars"></i>
        </button>
        <nav class="nav collapsed">
          <li>Home</li>
          <li class="active">Files</li>
          <li>Help</li>
        </nav>
      </div>
      <div class="controls">
        <div class="controls__item">
          <i class="icon fas fa-search"></i>
          <span class="text">Search</span>
        </div>
        <div class="controls__item">
          <i class="icon fab fa-windows"></i>
          <span class="text">Windows</span>
        </div>
        <div class="controls__item">
          <i class="icon fas fa-info-circle"></i>
          <span class="text">Information</span>
        </div>
      </div>
    </div>
    <div class="title">
      <div class="text">Drive de {{ username }}</div>

      <div class="btn-flow">
        <i class="fas fa-plus"></i>
      </div>
    </div>
    <div class="table-box">
      <table class="table">
        <thead class="table__head">
          <tr>
            <th></th>
            <th>Title</th>
            <th>Owner</th>
            <th>Last Modified</th>
            <th></th>
          </tr>
        </thead>
        <tbody class="table__body">
          {% for item in items %}
          <tr>
            <td><i class="file-icon fas fa-folder"></i></td>
            <td>
              {% if item.is_dir %}
              <a href="{% url 'folder_contents' item.path %}"
                >{{ item.name }}</a
              >
              {% else %} {{ item.name }} {% endif %}
            </td>
            <td>{{ username }}</td>
            <td>Yesterday</td>
            <td>
              <i class="fas fa-ellipsis-v" data-behavior="file-settings"></i>
              <ul class="file-menu collapsed">
                <li>Rename</li>
                <li>Move</li>
                <li>Delete</li>
                <li>Properties</li>
              </ul>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %} {{ form.as_p }}
      <button type="submit">Upload</button>
    </form>
    {% endcomment %}
  </body>
</html>
